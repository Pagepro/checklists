var app=angular.module("pageproChecklistApp",["ui.router","ngSanitize"]);app.config(["$stateProvider","$urlRouterProvider",function(t,e){e.when("","/"),e.otherwise("/404"),t.state("errorState",{url:"/404",title:"404 - Page not found",templateUrl:"templates/404.html"}).state("listsState",{url:"/",controller:"listsViewCtrl",title:"List of checklists",templateUrl:"templates/listsView.html"}).state("detailsState",{url:"/details/:id",controller:"detailsViewCtrl",templateUrl:"templates/detailsView.html"})}]).run(["$rootScope","$state",function(t,e){t.$on("$stateChangeSuccess",function(e,l){t.title=l.title,document.body.scrollTop=document.documentElement.scrollTop=0})}]),app.controller("detailsViewCtrl",["$scope","$rootScope","$window","ChecklistsFct","$state",function(t,e,l,c,r){t.allChecklists={},t.currentChecklist={},t.checkboxList={},t.localStorageNamespace="pagepro_checklists_",t.date=new Date,t.changeTriggered=function(){l.localStorage[t.localStorageNamespace+t.currentChecklist.id]=JSON.stringify(t.checkboxList)},t.resetCheckboxes=function(){t.checkboxList={},l.localStorage[t.localStorageNamespace+t.currentChecklist.id]=JSON.stringify({})},t.setCurrentChecklist=function(){return r.params?(t.allChecklists.forEach(function(e){return+e.id===+r.params.id?void(t.currentChecklist=e):void 0}),Object.keys(t.currentChecklist).length?(l.localStorage[t.localStorageNamespace+t.currentChecklist.id]||(l.localStorage[t.localStorageNamespace+t.currentChecklist.id]=JSON.stringify({})),t.checkboxList=JSON.parse(l.localStorage["pagepro_checklists_"+t.currentChecklist.id]),void(e.title=t.currentChecklist.name)):void r.go("errorState")):void r.go("errorState")},t.getChecklistJson=function(){c.getChecklistJson().then(function(e){t.allChecklists=e.data,t.setCurrentChecklist()})},t.getChecklistJson()}]),app.controller("listsViewCtrl",["$scope","ChecklistsFct",function(t,e){t.allChecklists={},t.date=new Date,e.getChecklistJson().then(function(e){t.allChecklists=e.data})}]),app.directive("scrollToElem",[function(){return{restrict:"A",link:function(t,e,l,c){var r=500;l.scrollSpeed&&(r=+l.scrollSpeed),e.bind("click",function(){angular.element("html, body").animate({scrollTop:angular.element(l.scrollToElem).offset().top},r)})}}}]),app.factory("ChecklistsFct",["$http",function(t){var e="src/json/";return{getChecklistJson:function(){return t.get(e+"checklist.json")}}}]);